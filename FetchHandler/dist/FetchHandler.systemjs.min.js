System.register([],function(a){'use strict';return{execute:function(){function b(a,b){return e(a)||d(a,b)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function e(a){if(Array.isArray(a))return a}a("fetchErrorHandler",function(a){var b=window.showMessage?window.showMessage:null;if(!b)var b=function(a){window?alert(a):console.log(a)};if(!a.errorMessage)a.message&&b(a.message,"error",a);else if(b(a.errorMessage,"error",a),a.errors)for(var c in a.errors)b(a.errors[c])});var f=a("fetchResponseHandler",function a(c){var d=function(){return new Promise(function(b,d){a.defaults.AuthManagerBridge.refreshToken().then(function(){c.refresh(),fetch(c.request).then(function(a){b(a)}).catch(function(a){d(a)})}).catch(function(){f.defaults.AuthManagerBridge.logout()})})},e=function(a){return new Promise(function(b,c){401==a.status?(console.log("token is refreshed in"+new Date),d().then(function(c){a=c,b(a)}).catch(function(a){c(a)})):b(a)})};return function(a){return new Promise(function(c,d){var f=e(a);Promise.all([f]).then(function(a){var e=b(a,1),f=e[0];if(f.ok){var g=f.headers.get("content-type");g&&-1!==g.indexOf("application/json")?c(f.json()):g&&-1!==g.indexOf("image/")?f.arrayBuffer().then(function(a){var b=btoa(new Uint8Array(a).reduce(function(a,b){return a+String.fromCharCode(b)},""));c("data:".concat(g,";base64,")+b)}):c({})}else return 502==f.status?d({errorMessage:"\u062E\u0637\u0627\u06CC 502  \u060C \u0633\u0631\u0648\u0631 \u06CC\u0627 \u062F\u0631 \u062D\u0627\u0644 \u0628\u0647 \u0631\u0648\u0632 \u0631\u0633\u0627\u0646\u06CC \u0627\u0633\u062A \u06CC\u0627 \u062F\u0686\u0627\u0631 \u0627\u0634\u06A9\u0627\u0644 \u0634\u062F\u0647 \u0627\u0633\u062A"}):f.json().then(function(a){d(a)})})})}});f.defaults={AuthManagerBridge:void 0}}}});
